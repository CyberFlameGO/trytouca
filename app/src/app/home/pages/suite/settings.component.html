<section class="wsl-page-tab" *ngIf="suite && team">
  <h2>Suite Settings</h2>
  <div class="wsl-settings">
    <div class="wsl-settings-section"
      *ngIf="team.role == ETeamRole.Admin || team.role == ETeamRole.Owner">
      <h3 for="wsl-suite-name">Suite Name</h3>
      <div *ngIf="alert[EModalType.ChangeName] && !alert[EModalType.ChangeName].close"
        class="alert" [ngClass]="alert[EModalType.ChangeName]?.type" role="alert">
        <small>{{ alert[EModalType.ChangeName]?.msg }}</small>
      </div>
      <p>
        Short user-friendly name used on Weasel Platform and documents generated by it.
      </p>
      <form [formGroup]="formName" novalidate
        (ngSubmit)="onSubmit(EModalType.ChangeName, formName.value)">
        <input type="text"
          class="form-control" id="wsl-suite-name" tabindex="1"
          required autocomplete="off"
          aria-describedby="wsl-suite-name-help"
          formControlName="name" name="name">
        <button type="submit" class="wsl-btn-dark" tabindex="2">
          Update
        </button>
      </form>
      <small class="text-muted" id="wsl-suite-name-help"
        [hidden]="formName.controls.name.pristine || formName.controls.name.valid">
        Should contain 3 to 32 characters.
      </small>
    </div>
    <div class="wsl-settings-section"
      *ngIf="team.role == ETeamRole.Admin || team.role == ETeamRole.Owner">
      <h3 for="wsl-suite-slug">Suite Slug</h3>
      <div *ngIf="alert[EModalType.ChangeSlug] && !alert[EModalType.ChangeSlug].close"
        class="alert" [ngClass]="alert[EModalType.ChangeSlug]?.type" role="alert">
        <small>{{ alert[EModalType.ChangeSlug]?.msg }}</small>
      </div>
      <p>
        Unique url-friendly identifier used in the links to your test results.
      </p>
      <form [formGroup]="formSlug" novalidate
        (ngSubmit)="onSubmit(EModalType.ChangeSlug, formSlug.value)">
        <input type="text"
          class="form-control" id="wsl-suite-slug" tabindex="3"
          required autocomplete="off"
          aria-describedby="wsl-suite-slug-help"
          formControlName="slug" name="slug">
        <button type="submit" class="wsl-btn-dark" tabindex="4">
          Update
        </button>
      </form>
      <small class="text-muted" id="wsl-suite-slug-help"
        [hidden]="formSlug.controls.slug.pristine || formSlug.controls.slug.valid">
        Should contain 3 to 16 alphanumeric characters
        and may not start with a number.
      </small>
    </div>
    <div class="wsl-settings-image wsl-custom-settings-banner">
      <img src="./assets/undraw/undraw_adjustments_p22m.svg" />
    </div>
    <div class="wsl-settings-section">
      <h3>Data Retention</h3>
      <div *ngIf="alert[EModalType.ChangeRetainFor] && !alert[EModalType.ChangeRetainFor].close"
        class="alert" [ngClass]="alert[EModalType.ChangeRetainFor]?.type" role="alert">
        <small>{{ alert[EModalType.ChangeRetainFor]?.msg }}</small>
      </div>
      <p>
        All testresults for this suite are retained for
        <b>{{ suite.retainFor | amDuration:'seconds' }}</b>.
        You may adjust this duration to up to {{ 43800 | amDuration:'hours' }}.
        This change will not affect previously submitted results.
      </p>
      <small class="text-muted">
        Duration in months.
      </small>
      <form [formGroup]="formRetainFor" novalidate
        (ngSubmit)="onSubmit(EModalType.ChangeRetainFor, formRetainFor.value)">
        <input type="number"
          class="form-control" id="wsl-suite-retainFor" tabindex="4"
          required autocomplete="off"
          aria-describedby="wsl-suite-retainFor-help"
          formControlName="retainFor" name="retainFor">
        <button type="submit" class="wsl-btn-dark" tabindex="4">
          Update
        </button>
      </form>
      <small class="text-muted" id="wsl-suite-retainFor-help"
        [hidden]="formRetainFor.controls.retainFor.pristine || formRetainFor.controls.retainFor.valid">
        Please enter a value in months no longer than 60 months.
      </small>
    </div>
    <div class="wsl-settings-section">
      <h3>Auto Seal Duration</h3>
      <div *ngIf="alert[EModalType.ChangeSealAfter] && !alert[EModalType.ChangeSealAfter].close"
        class="alert" [ngClass]="alert[EModalType.ChangeSealAfter]?.type" role="alert">
        <small>{{ alert[EModalType.ChangeSealAfter]?.msg }}</small>
      </div>
      <p>
        Newly submitted versions are set to be sealed after
        <b>{{ suite.sealAfter | amDuration:'seconds' }}</b> from the time
        the last testcase was submitted. Sealing a version prevents further
        submission of results to it.
        You may adjust this duration to up to {{ 30 | amDuration:'minutes' }}.
      </p>
      <small class="text-muted">
        Duration in minutes.
      </small>
      <form [formGroup]="formSealAfter" novalidate
        (ngSubmit)="onSubmit(EModalType.ChangeSealAfter, formSealAfter.value)">
        <input type="number"
          class="form-control" id="wsl-suite-sealAfter" tabindex="4"
          required autocomplete="off"
          aria-describedby="wsl-suite-sealAfter-help"
          formControlName="sealAfter" name="sealAfter">
        <button type="submit" class="wsl-btn-dark" tabindex="6">
          Update
        </button>
      </form>
      <small class="text-muted" id="wsl-suite-sealAfter-help"
        [hidden]="formSealAfter.controls.sealAfter.pristine || formSealAfter.controls.sealAfter.valid">
        Please enter a value no longer than 30 minutes.
      </small>
    </div>
    <div class="wsl-settings-section"
      *ngIf="team.role == ETeamRole.Admin || team.role == ETeamRole.Owner">
      <h3 class="wsl-text-danger">Danger Zone</h3>
      <div *ngIf="alert[EModalType.DeleteSuite]"
        class="alert" [ngClass]="alert[EModalType.DeleteSuite]?.type" role="alert">
        <small>{{ alert[EModalType.DeleteSuite]?.msg }}</small>
      </div>
      <p>
        You are an administrator of team <b>{{ suite.teamName }}</b>.
        You may delete this suite if you so choose.
        This action permanently removes all data associated with
        suite <b>{{ suite.suiteName }}</b>, including submitted
        testresults for all versions, comments and promotions.
      </p>
      <button (click)="openConfirmModal(EModalType.DeleteSuite)"
        type="button" class="wsl-btn-danger" tabindex="5">
        Delete Suite
      </button>
    </div>
  </div>
</section>
