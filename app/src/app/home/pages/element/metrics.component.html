<section id="wsl-element-metrics">
  <app-home-list-filter [manager]="filterManager" [params]="filterParams()" [stats]="filterStats()" (updateList)="updateList($event)">
  </app-home-list-filter>
  <div *ngIf="countShownRows(ItemType.Common)" class="wsl-list">
    <div class="wsl-list-head">
      <h2>Common Metrics</h2>
      <p>
        Metrics that are both in version {{ params.srcBatchSlug }}
        {{ suite.latest.batchSlug === params.srcBatchSlug ? '(latest)' : '' }}
        and in version {{ params.dstBatchSlug }}
        {{ suite.baseline.batchSlug === params.dstBatchSlug ? '(baseline)' : '' }}
      </p>
      <p *ngIf="countShownRows(ItemType.Common) !== countRows(ItemType.Common)">
        You are viewing <b>{{ countShownRows(ItemType.Common) | i18nPlural: { '=1': 'one', 'other': '#' } }}</b>
        of {{ countRows(ItemType.Common) }} common metrics.
      </p>
    </div>
    <ul class="wsl-list-body">
      <li *ngFor="let item of getShownRows(ItemType.Common); let i = index;" (click)="selectedRow = i" class="wsl-list-item-outer" [ngClass]="{'wsl-list-item-focused': selectedRow === i}">
        <app-element-item-metric [key]="item" [params]="params">
        </app-element-item-metric>
      </li>
    </ul>
  </div>
  <div *ngIf="countShownRows(ItemType.Fresh)" class="wsl-list">
    <div class="wsl-list-head">
      <h2>New Metrics</h2>
      <p>
        Metrics that are submitted in version {{ params.srcBatchSlug }}
        {{ suite.latest.batchSlug === params.srcBatchSlug ? '(latest)' : '' }}
        but were not included in version {{ params.dstBatchSlug }}
        {{ suite.baseline.batchSlug === params.dstBatchSlug ? '(baseline)' : '' }}
      </p>
      <p *ngIf="countShownRows(ItemType.Fresh) !== countRows(ItemType.Fresh)">
        You are viewing <b>{{ countShownRows(ItemType.Fresh) | i18nPlural: { '=1': 'one', 'other': '#' } }}</b>
        of {{ countRows(ItemType.Fresh) }} new metrics.
      </p>
    </div>
    <ul class="wsl-list-body">
      <li *ngFor="let item of getShownRows(ItemType.Fresh); let i = index;" (click)="selectedRow = i + countShownRows(ItemType.Common)" class="wsl-list-item-outer" [ngClass]="{'wsl-list-item-focused': selectedRow === i + countShownRows(ItemType.Common)}">
        <app-element-item-result [key]="item" [params]="params">
        </app-element-item-result>
      </li>
    </ul>
  </div>
  <div *ngIf="countShownRows(ItemType.Missing)" class="wsl-list">
    <div class="wsl-list-head">
      <h2>Missing Metrics</h2>
      <p>
        Metrics that were included in version {{ params.dstBatchSlug }}
        {{ suite.baseline.batchSlug === params.dstBatchSlug ? '(baseline)' : '' }}
        but are not submitted in version {{ params.srcBatchSlug }}
        {{ suite.latest.batchSlug === params.srcBatchSlug ? '(latest)' : '' }}
      </p>
      <p *ngIf="countShownRows(ItemType.Missing) !== countRows(ItemType.Missing)">
        You are viewing <b>{{ countShownRows(ItemType.Missing) | i18nPlural: { '=1': 'one', 'other': '#' } }}</b>
        of {{ countRows(ItemType.Missing) }} missing metrics.
      </p>
    </div>
    <ul class="wsl-list-body">
      <li *ngFor="let item of getShownRows(ItemType.Missing); let i = index;" (click)="selectedRow = i + countShownRows(ItemType.Common) + countShownRows(ItemType.Fresh);"  class="wsl-list-item-outer" [ngClass]="{'wsl-list-item-focused': selectedRow === i + countShownRows(ItemType.Common) + countShownRows(ItemType.Fresh)}">
        <app-element-item-result [key]="item" [params]="params">
        </app-element-item-result>
      </li>
    </ul>
  </div>
  <app-home-list-pager [params]="pagerParams()" [stats]="filterStats()" (updateList)="updateList($event)">
  </app-home-list-pager>
  <div class="wsl-feedback-link">
    <app-home-feedback-link [page]="'app-element-tab-metrics'">
    </app-home-feedback-link>
  </div>
</section>
