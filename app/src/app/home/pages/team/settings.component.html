<section class="wsl-page-tab" *ngIf="team">
  <h2>Team Settings</h2>
  <div class="wsl-settings">
    <div class="wsl-settings-section"
      *ngIf="team.role === ETeamRole.Owner">
      <h3 for="wsl-team-name">Team Name</h3>
      <ngb-alert *ngIf="alert[EModalType.ChangeName] && !alert[EModalType.ChangeName].close"
        [type]="alert[EModalType.ChangeName]?.type"
        [dismissible]="false">
        <small>{{ alert[EModalType.ChangeName]?.msg }}</small>
      </ngb-alert>
      <p>
        Short user-friendly name used on the platform and all generated reports.
      </p>
      <form [formGroup]="formName" novalidate
        (ngSubmit)="onSubmit(EModalType.ChangeName, formName.value)">
        <input type="text"
          class="form-control" id="wsl-team-name" tabindex="1"
          required autocomplete="off"
          aria-describedby="wsl-team-name-help"
          formControlName="name" name="name">
        <button type="submit" class="wsl-btn-dark" tabindex="2">
          Update
        </button>
      </form>
      <small class="text-muted"
        [hidden]="formName.controls.name.pristine || formName.controls.name.valid">
        Should contain 3 to 32 characters.
      </small>
    </div>
    <div class="wsl-settings-section"
      *ngIf="team.role === ETeamRole.Owner">
      <h3 for="wsl-team-slug">Team Slug</h3>
      <ngb-alert *ngIf="alert[EModalType.ChangeSlug] && !alert[EModalType.ChangeSlug].close"
        [type]="alert[EModalType.ChangeSlug]?.type"
        [dismissible]="false">
        <small>{{ alert[EModalType.ChangeSlug]?.msg }}</small>
      </ngb-alert>
      <p>
        Unique URL-friendly identifier for this team. Changing the slug
        invalidates previous links to the test results for this team.
      </p>
      <form [formGroup]="formSlug" novalidate
        (ngSubmit)="onSubmit(EModalType.ChangeSlug, formSlug.value)">
        <input type="text"
          class="form-control" id="wsl-team-slug" tabindex="3"
          required autocomplete="off"
          aria-describedby="wsl-team-slug-help"
          formControlName="slug" name="slug">
        <button type="submit" class="wsl-btn-dark" tabindex="4">
          Update
        </button>
      </form>
      <small class="text-muted"
        [hidden]="formSlug.controls.slug.pristine || formSlug.controls.slug.valid">
        Should contain 3 to 16 alphanumeric characters
        and may not start with a number.
      </small>
    </div>
    <div class="wsl-settings-section"
      *ngIf="team.role !== ETeamRole.Owner">
      <h3 class="wsl-text-danger">Danger Zone</h3>
      <ngb-alert *ngIf="alert[EModalType.LeaveTeam]"
        [type]="alert[EModalType.LeaveTeam]?.type"
        [dismissible]="false">
        <small>{{ alert[EModalType.LeaveTeam]?.msg }}</small>
      </ngb-alert>
      <p>
        You are a member of team <b>{{ team.name }}</b>.
        You can leave this team at any time.
        Once you leave a team, you need a new invitation to join back
        in the future.
      </p>
      <button (click)="openConfirmModal(EModalType.LeaveTeam)"
        type="button" class="wsl-btn-danger" tabindex="5">
        Leave Team
      </button>
    </div>
    <div class="wsl-settings-section"
      *ngIf="team.role === ETeamRole.Owner">
      <h3 class="wsl-text-danger">Danger Zone</h3>
      <ngb-alert *ngIf="alert[EModalType.DeleteTeam]"
        [type]="alert[EModalType.DeleteTeam]?.type"
        [dismissible]="false">
        <small>{{ alert[EModalType.DeleteTeam]?.msg }}</small>
      </ngb-alert>
      <p>
        You own team <b>{{ team.name }}</b>. You may delete
        this team and all its content, if you so choose.
        This action permanently deletes all data associated with this team.
      </p>
      <button type="button" (click)="openConfirmModal(EModalType.DeleteTeam)"
        class="wsl-btn-danger" tabindex="6">
        Delete Team
      </button>
    </div>
    <div class="wsl-settings-image wsl-custom-settings-banner">
      <img src="./assets/undraw/undraw_team_spirit_hrr4.svg" />
    </div>
  </div>
</section>
