<section *ngIf="team">
  <h2>Team Settings</h2>
  <div class="wsl-settings">
    <div *ngIf="team.role === ETeamRole.Owner" class="wsl-settings-section">
      <h3 for="wsl-team-name">Team Name</h3>
      <div *ngIf="alert[EModalType.ChangeName] && !alert[EModalType.ChangeName].close" role="alert" class="wsl-alert" [ngClass]="alert[EModalType.ChangeName]?.type">
        <small [innerHtml]="alert[EModalType.ChangeName]?.msg" class="wsl-alert-text"></small>
      </div>
      <p>
        Short user-friendly name used on the platform and all generated reports.
      </p>
      <form [formGroup]="formName" (ngSubmit)="onSubmit(EModalType.ChangeName, formName.value)" novalidate class="space-x-2 flex">
        <input type="text" id="wsl-team-name" tabindex="1" required autocomplete="off" aria-describedby="wsl-team-name-help" formControlName="name" name="name" class="wsl-input-field">
        <button type="submit" tabindex="2" class="wsl-btn-sm wsl-btn-dark font-normal">
          Update
        </button>
      </form>
      <small [hidden]="formName.controls.name.pristine || formName.controls.name.valid" class="wsl-text-muted">
        Should contain 3 to 32 characters.
      </small>
    </div>
    <div *ngIf="team.role === ETeamRole.Owner" class="wsl-settings-section">
      <h3 for="wsl-team-slug">Team Slug</h3>
      <div *ngIf="alert[EModalType.ChangeSlug] && !alert[EModalType.ChangeSlug].close" role="alert" class="wsl-alert" [ngClass]="alert[EModalType.ChangeSlug]?.type">
        <small [innerHtml]="alert[EModalType.ChangeSlug]?.msg" class="wsl-alert-text"></small>
      </div>
      <p>
        Unique URL-friendly identifier for this team. Changing the slug
        invalidates previous links to the test results for this team.
      </p>
      <form [formGroup]="formSlug" (ngSubmit)="onSubmit(EModalType.ChangeSlug, formSlug.value)" novalidate class="space-x-2 flex">
        <input type="text" id="wsl-team-slug" tabindex="3" required autocomplete="off" aria-describedby="wsl-team-slug-help" formControlName="slug" name="slug" class="wsl-input-field">
        <button type="submit" tabindex="4" class="wsl-btn-sm wsl-btn-dark font-normal">
          Update
        </button>
      </form>
      <small [hidden]="formSlug.controls.slug.pristine || formSlug.controls.slug.valid" class="wsl-text-muted">
        Should contain 3 to 16 alphanumeric characters and may not start with a number.
      </small>
    </div>
    <div *ngIf="team.role !== ETeamRole.Owner" class="wsl-settings-section">
      <h3 class="wsl-text-danger">Danger Zone</h3>
      <div *ngIf="alert[EModalType.LeaveTeam] && !alert[EModalType.LeaveTeam].close" role="alert" class="wsl-alert" [ngClass]="alert[EModalType.LeaveTeam]?.type">
        <small [innerHtml]="alert[EModalType.LeaveTeam]?.msg" class="wsl-alert-text"></small>
      </div>
      <p>
        You are a member of team <b>{{ team.name }}</b>.
        You can leave this team at any time.
        Once you leave a team, you need a new invitation to join back
        in the future.
      </p>
      <button type="button" (click)="openConfirmModal(EModalType.LeaveTeam)" tabindex="5" class="wsl-btn-sm wsl-btn-danger">
        Leave Team
      </button>
    </div>
    <div *ngIf="team.role === ETeamRole.Owner" class="wsl-settings-section">
      <h3 class="wsl-text-danger">Danger Zone</h3>
      <div *ngIf="alert[EModalType.DeleteTeam] && !alert[EModalType.DeleteTeam].close" role="alert" class="wsl-alert" [ngClass]="alert[EModalType.DeleteTeam]?.type">
        <small [innerHtml]="alert[EModalType.DeleteTeam]?.msg" class="wsl-alert-text"></small>
      </div>
      <p>
        You own team <b>{{ team.name }}</b>. You may delete
        this team and all its content, if you so choose.
        This action permanently deletes all data associated with this team.
      </p>
      <button type="button" (click)="openConfirmModal(EModalType.DeleteTeam)" tabindex="6" class="wsl-btn-sm wsl-btn-danger">
        Delete Team
      </button>
    </div>
    <div class="wsl-settings-image hidden lg:block lg:col-start-2 lg:col-end-3 lg:row-start-1 lg:row-end-4">
      <img src="./assets/undraw/undraw_team_spirit_hrr4.svg" />
    </div>
  </div>
</section>
