<h2><label for="wsl-body">{{ fields.editorTitle }}</label></h2>
<p>{{ fields.editorSubtitle }}</p>
<ngb-alert *ngIf="alert" [type]="alert[0]" [dismissible]="false">
  <small [innerHtml]="alert[1]"></small>
</ngb-alert>
<div class="wsl-comment-post">
  <form class="wsl-form" [formGroup]="form" novalidate
    (ngSubmit)="onSubmit(form.value)">
    <div class="wsl-comment" [hidden]="!fields.previewShow">
      <blockquote>
        <markdown [data]="form.controls.body.value">
        </markdown>
      </blockquote>
    </div>
    <div class="form-group" [hidden]="fields.previewShow">
      <textarea class="form-control" id="wsl-body" rows="5" tabindex="1"
        aria-describedby="wsl-body-help"
        formControlName="body" name="body">
      </textarea>
      <small id="wsl-body-help" class="text-danger"
        [hidden]="form.controls.body.pristine || form.controls.body.valid">
        Please provide more information in your comment.
      </small>
      <small class="text-muted"
        [hidden]="!form.controls.body.pristine && !form.controls.body.valid">
        This field supports markdown format.
      </small>
    </div>
    <div class="wsl-form-footer">
      <div class="wsl-form-submit">
        <button type="submit" class="wsl-btn-dark" tabindex="2">
          {{ fields.buttonSubmitText }}
        </button>
        <button type="button" (click)="togglePreview()" class="wsl-btn-light" tabindex="3"
          [hidden]="!fields.buttonPreviewShow || !form.controls.body.valid || form.controls.body.pristine">
          {{ fields.buttonPreviewText }}
        </button>
        <button type="button" (click)="cancelForm()" class="wsl-btn-light" tabindex="4"
          [hidden]="!fields.buttonCancelShow">
          Cancel
        </button>
      </div>
    </div>
  </form>
</div>
<h2>Comments</h2>
<article class="wsl-comment-empty wsl-comment-frame" *ngIf="comments.length === 0">
  This version has no comments yet.
</article>
<div class="wsl-comment-frame" *ngFor="let item of comments">
  <app-home-comment
    [meta]="item"
    (commentAction)="commentAction($event)">
  </app-home-comment>
  <div class="wsl-comment-reply" *ngFor="let reply of item.replies">
    <app-home-comment
      [meta]="reply"
      (commentAction)="commentAction($event)">
    </app-home-comment>
  </div>
</div>
